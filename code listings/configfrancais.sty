% Created in 2022
%
% @author: Stanislas MEZUREUX
% Copyright (c) 2021 Stanislas MEZUREUX. All rights reserved.


%%%%%%%%%%%%%%%-- Packages --%%%%%%%%%%%%%%%%
\usepackage{geometry}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}
\usepackage{lmodern}
\usepackage{amsmath,amsfonts,amssymb,amsthm}
\usepackage{stmaryrd}
\usepackage{stix}
\usepackage[many]{tcolorbox}
\usepackage{fancyhdr}
\usepackage[explicit]{titlesec}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}
\usepackage{cite}
\usepackage{lastpage}
\usepackage{minted}
\usepackage{enumitem}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage[figurename=Code]{caption}
\usepackage{xcolor}
\usepackage{cancel}
\usepackage{soulutf8}
\usepackage{iwona}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%-- Template variables --%%%%%%%%%%%
\newcommand{\num}{}
\newcommand{\lab}{TIPE}
\definecolor{mainColor}{HTML}{255A66}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%-- Theoremes --%%%%%%%%%%%%%%%
\tcbuselibrary{theorems}
\tcbuselibrary{breakable}
\newtcbtheorem[number within=section]{theorem}{Théorème}{colback=theoremBox!10,colframe=theoremBox!50, coltitle=methodBox!30!black, fonttitle=\bfseries, breakable}{th}
\newtcbtheorem[number within=section]{definition}{Définition}{colback=definitionBox!10,colframe=definitionBox!50, coltitle=methodBox!30!black, fonttitle=\bfseries, breakable}{def}
\newtcbtheorem[number within=section]{example}{Exemple}{colback=exampleBox!10,colframe=exampleBox!50, coltitle=methodBox!30!black, fonttitle=\bfseries, breakable}{ex}
\newtcbtheorem[number within=section]{method}{Méthode}{colback=methodBox!10, colframe=methodBox!50, coltitle=methodBox!30!black, fonttitle=\bfseries, breakable}{met}
\newtcbtheorem[number within=section]{property}{Propriété}{colback=propertyBox!10,colframe=propertyBox!50, coltitle=methodBox!30!black, fonttitle=\bfseries, breakable}{prop}
\newtcbtheorem[number within=section]{remark}{Remarque}{breakable}{rq}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%-- Style --%%%%%%%%%%%%%%%%%%
% title page
\makeatletter
\def\thickhrulefill{\leavevmode \leaders \hrule height .75ex \hfill \kern \z@}
\renewcommand\maketitle{
  \begin{tcolorbox}[hbox, center, colback=white, colframe=mainColor]
    \textsf{\textbf{\large\textcolor{mainColor}{\lab\num\ $\rhd$} \@title}}
  \end{tcolorbox}}
\makeatother

% sections and subsections
\newbox\TitleUnderlineTestBox
\newcommand*\TitleUnderline[1]
  {%
    \bgroup
    \setbox\TitleUnderlineTestBox\hbox{\colorbox{mainColor}\strut}%
    \setul{\dimexpr\dp\TitleUnderlineTestBox-.3ex\relax}{.3ex}%
    \ul{#1}%
    \egroup
  }
\newcommand*\SectionNumberBox[1]
  {%
    \colorbox{mainColor}
      {%
        \makebox[2.5em][c]
          {%
            \color{white}%
            \strut
            \csname the#1\endcsname
          }%
      }%
    \TitleUnderline{\ \ \ }%
  }
\titleformat{\section}
  {\Large\bfseries\sffamily\color{mainColor}}
  {\SectionNumberBox{section}}
  {0pt}
  {\TitleUnderline{#1}}
\titleformat{\subsection}
  {\large\bfseries\sffamily\color{mainColor}}
  {\SectionNumberBox{subsection}}
  {0pt}
  {\TitleUnderline{#1}}

\geometry{
  top=15mm,
  inner=15mm,
  outer=15mm,
  bottom=15mm,
  headheight=3ex,
  headsep=2ex,
}
\pgfplotsset{compat=newest}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
\renewcommand{\thesection}{\Roman{section}} 
\renewcommand{\thesubsubsection}{\thesubsection.\alph{subsubsection}} 
\numberwithin{equation}{section}
\newenvironment{longlisting}{\captionsetup{type=figure}}{}
\renewenvironment{proof}{{\bfseries \sffamily \itshape \noindent Démonstration $\star$}}{\hfill\qed}
\renewcommand{\CancelColor}{\color{red}}
\usetikzlibrary{decorations.pathmorphing,patterns}
\tcolorboxenvironment{proof}{
  blanker,
  before skip=\topsep,
  after skip=\topsep,
  borderline west={0.4pt}{0.4pt}{black},
  breakable,
  left=12pt,
  right=12pt,
}

\pagestyle{fancyplain}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{1pt}
\fancyhead[L]{\bfseries \sffamily Stanislas MEZUREUX}
\cfoot{\bfseries \sffamily \thepage/\pageref{LastPage}}
\lfoot{\bfseries \sffamily Secret Santa}

% side label
\newlength{\positionmarge}
\newlength{\decalage}
\setlength{\positionmarge}{140mm}
\setlength{\decalage}{\positionmarge * \real{\num}}
\addtolength{\positionmarge}{-\decalage / 16}
\rfoot{\bfseries \sffamily MP 2021|22
    \begin{tikzpicture}[overlay,remember picture]
        \node[fill=mainColor ,text=white,
        inner ysep=6pt, inner xsep=4pt,align=flush left,
        rounded corners={2pt},text width=2cm,align=flush left]
        at ([xshift=-2mm,yshift=\positionmarge]current page.east)
        {\sffamily\bfseries\footnotesize \lab\num};
    \end{tikzpicture}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%*%%%%%-- Colors --%%%%%%%%%%%%%%%%%
\definecolor{definitionBox}{HTML}{68E1AA}
\definecolor{theoremBox}{HTML}{FF7878}
\definecolor{exampleBox}{HTML}{51B5F8}
\definecolor{methodBox}{HTML}{B869EA}
\definecolor{propertyBox}{HTML}{FF5500}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%-- Operateurs --%%%%%%%%%%%%%%%
\newcommand{\Card}{\mathop{\mathrm{Card}}\nolimits}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%-- Commandes --%%%%%%%%%%%%%%%
\newcommand{\un}{\mathds{1}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\I}{\mathbb{I}}
\newcommand{\J}{\mathbb{J}}
\newcommand{\K}{\mathbb{K}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}

\newcommand{\e}{\mathop{\mathrm{e}}\nolimits}

\newcommand{\ie}[1]{\left\llbracket#1\right\rrbracket}
\newcommand{\egdef}{\stackrel{\text{déf}}{=}}
\newcommand{\dt}{\mathrm{d}}
\newcommand{\App}[5]{
 \begin{array}[t]{r c c l}
 #1 \textnormal{:}& #2 & \longrightarrow & #3 \\
       & #4 & \longmapsto & #5 
 \end{array}
 }

 \newcommand{\important}[1]{\textbf{\textsf{#1}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%