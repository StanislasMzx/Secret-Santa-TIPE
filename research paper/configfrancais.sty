% Created in 2022
%
% @author: Stanislas MEZUREUX
% Copyright (c) 2021 Stanislas MEZUREUX. All rights reserved.


%%%%%%%%%%%%%%%-- Packages --%%%%%%%%%%%%%%%%
\usepackage{geometry}
\usepackage{lmodern}
\usepackage{latexsym}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}
\usepackage{amsmath,amsfonts,amssymb,amsthm}
\usepackage{stmaryrd}
\usepackage[many]{tcolorbox}
\usepackage{fancyhdr}
\usepackage[scale=1.25]{ccicons}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}
\usepackage{cite}
\usepackage{lastpage}
\usepackage{minted}
\usepackage{enumitem}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage[figurename=Code]{caption}
\usepackage{xcolor}
\usepackage{cancel}
\usepackage{iwona}
\usepackage{titlesec}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%-- Theoremes --%%%%%%%%%%%%%%%
\tcbuselibrary{theorems}
\tcbuselibrary{breakable}
\newtcbtheorem[number within=section]{theorem}{Théorème}{colback=theoremBox!10,colframe=theoremBox!50, coltitle=methodBox!30!black, fonttitle=\bfseries, breakable}{th}
\newtcbtheorem[number within=section]{definition}{Définition}{colback=definitionBox!10,colframe=definitionBox!50, coltitle=methodBox!30!black, fonttitle=\bfseries, breakable}{def}
\newtcbtheorem[number within=section]{example}{Exemple}{colback=exampleBox!10,colframe=exampleBox!50, coltitle=methodBox!30!black, fonttitle=\bfseries, breakable}{ex}
\newtcbtheorem[number within=section]{method}{Méthode}{colback=methodBox!10, colframe=methodBox!50, coltitle=methodBox!30!black, fonttitle=\bfseries, breakable}{met}
\newtcbtheorem[number within=section]{property}{Propriété}{colback=propertyBox!10,colframe=propertyBox!50, coltitle=methodBox!30!black, fonttitle=\bfseries, breakable}{prop}
\newtcbtheorem[number within=section]{remark}{Remarque}{breakable}{rq}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%-- Style --%%%%%%%%%%%%%%%%%%
% title page
\makeatletter
\def\thickhrulefill{\leavevmode \leaders \hrule height .75ex \hfill \kern \z@}
\renewcommand\maketitle{
\thispagestyle{empty}
\vspace*{175\p@}%
  {\parindent \z@ \centering \reset@font
        \thickhrulefill\hspace*{2px}
        \large \textbf{TIPE}
        \hspace*{2px}\thickhrulefill
        \par\nobreak
        \vspace*{20\p@}%
        \interlinepenalty\@M
        \hrule
        \vspace*{10\p@}%
        \Huge \bfseries \@title\par\nobreak
        \par
        \vspace*{10\p@}%
        \hrule
        \vspace*{30\p@}
        \Large \textsc \@author
        \par
        \vspace*{30\p@}
        \normalsize \mdseries MP
        \par
        \vspace*{5\p@}
        \normalsize Lycée Henri Poincaré
        \par
        \vspace*{20\p@}
        \normalsize \@date
    \vskip 10\p@}}
\makeatother

% chapter title
\makeatletter
\def\@makechapterhead#1{%
  \vspace*{60\p@}%
  { \parindent \z@ \raggedright \normalfont
    \interlinepenalty\@M
    \begin{tcolorbox}[colback=white, colframe=mainColor, breakable]
      \sffamily\bfseries\Huge
      \begin{center}
        \textcolor{mainColor}{$\lhd$\ \@chapapp{}\ \thechapter\ $\rhd$}
        
        #1
      \end{center}
    \end{tcolorbox}
    \bigbreak
    \vskip 70\p@
  }}
\makeatother

% section title
\titleformat{\section}[hang]{
  \Large\bfseries}{\textcolor{mainColor}{\thesection\ $\rhd$}\ }{0pt}{\Large\bfseries
}

\geometry{
  top=15mm,
  inner=15mm,
  outer=15mm,
  bottom=17.5mm,
  headheight=3ex,
  headsep=2ex,
}
\pgfplotsset{compat=newest}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
\renewcommand{\thesection}{\Roman{section}} 
\renewcommand{\thesubsubsection}{\thesubsection.\alph{subsubsection}} 
\setlist[itemize]{label=$\color{mainColor}{\rhd}$}
\setlist[enumerate]{label=\textcolor{mainColor}{\theenumi.}}
\numberwithin{equation}{section}
\newenvironment{longlisting}{\captionsetup{type=figure}}{}
\renewenvironment{proof}{{\bfseries \sffamily \itshape \noindent Démonstration $\rhd$}}{\hfill\qed}
\renewcommand{\CancelColor}{\color{red}}
\usetikzlibrary{decorations.pathmorphing,patterns}
\tcolorboxenvironment{proof}{
  blanker,
  before skip=\topsep,
  after skip=\topsep,
  borderline west={0.4pt}{0.4pt}{black},
  breakable,
  left=12pt,
  right=12pt,
}

% side label
\newcommand{\num}{0}
\newlength{\positionmarge}
\newlength{\decalage}
\setlength{\positionmarge}{140mm}
\setlength{\decalage}{\positionmarge * \real{\num}}
\addtolength{\positionmarge}{-\decalage / 16}
\newcommand{\insertsidelabel}{%
  \begin{tikzpicture}[overlay,remember picture]
    \node[fill=mainColor ,text=white,
    inner ysep=6pt, inner xsep=4pt,align=flush left,
    rounded corners={2pt},text width=2cm,align=flush left]
    at ([xshift=-2mm,yshift=\positionmarge]current page.east)
    % {\sffamily\bfseries\footnotesize TP\num};
    {\sffamily\bfseries\footnotesize TIPE};
  \end{tikzpicture}
}

\pagestyle{fancy}
\fancyhead[L]{{\bfseries \sffamily \leftmark}}
\fancyhead[R]{\bfseries \sffamily MEZUREUX $\vert$ ESPINOSA}
\cfoot{\bfseries \sffamily \thepage/\pageref{LastPage}}
\lfoot{\bfseries \sffamily Lycée H. Poincaré}
\rfoot{\ccbyncsaeu\insertsidelabel}
\fancypagestyle{plain}{%
  \renewcommand{\headrulewidth}{0pt}
  \fancyhead[L]{{\bfseries \sffamily Secret Santa}}
  \fancyhead[R]{\bfseries \sffamily MEZUREUX $\vert$ ESPINOSA}
  \cfoot{\bfseries \sffamily \thepage/\pageref{LastPage}}
  \lfoot{\bfseries \sffamily Lycée H. Poincaré}
  \rfoot{\ccbyncsaeu\insertsidelabel}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%*%%%%%-- Colors --%%%%%%%%%%%%%%%%%
\definecolor{mainColor}{HTML}{A4BAB7}
\definecolor{definitionBox}{HTML}{68E1AA}
\definecolor{theoremBox}{HTML}{FF7878}
\definecolor{exampleBox}{HTML}{51B5F8}
\definecolor{methodBox}{HTML}{B869EA}
\definecolor{propertyBox}{HTML}{FF5500}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%-- Operateurs --%%%%%%%%%%%%%%%
\newcommand{\Card}{\mathop{\mathrm{Card}}\nolimits}
\newcommand{\Var}{\mathop{\mathrm{Var}}\nolimits}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%-- Commandes --%%%%%%%%%%%%%%%
\newcommand{\un}{\mathds{1}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\I}{\mathbb{I}}
\newcommand{\J}{\mathbb{J}}
\newcommand{\K}{\mathbb{K}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\EE}{\mathcal{E}}

\newcommand{\e}{\mathop{\mathrm{e}}\nolimits}

\newcommand{\ie}[1]{\left\llbracket#1\right\rrbracket}
\newcommand{\egdef}{\stackrel{\text{déf}}{=}}
\newcommand{\dt}{\mathrm{d}}
\newcommand{\bracket}[1]{\langle #1\rangle}
\newcommand{\App}[5]{
 \begin{array}[t]{r c c l}
 #1 \textnormal{:}& #2 & \longrightarrow & #3 \\
       & #4 & \longmapsto & #5 
 \end{array}
 }

 \newcommand{\important}[1]{\textbf{\textsf{#1}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%